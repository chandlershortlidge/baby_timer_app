<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Nap Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Dev: CDN is fine. (For prod, build Tailwind) -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-gray-50 to-blue-50/30 text-gray-800">
  <div class="max-w-md mx-auto min-h-screen p-4 space-y-6">

    <!-- Bedtime toggle -->
    <button id="bedtime-btn"
      class="w-full bg-indigo-600 text-white font-bold py-4 px-6 rounded-2xl shadow-lg hover:bg-indigo-700 transition-colors">
      Start Bedtime
    </button>

    <!-- Status card -->
    <div id="status-card" class="bg-yellow-50 rounded-3xl p-8 text-center shadow-lg">
      <!-- Icon -->
      <div id="status-icon-container" class="w-12 h-12 mx-auto text-yellow-500">
        <!-- Sun (awake) -->
        <svg id="awake-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm0-14a1 1 0 0 1 1-1h0a1 1 0 1 1-2 0h0a1 1 0 0 1 1-1ZM12 21a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm9-9a1 1 0 1 1 0 2 1 1 0 0 1 0-2ZM3 12a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm14.95-6.364a1 1 0 1 1 1.414 1.414 1 1 0 0 1-1.414-1.414ZM4.636 18.364a1 1 0 1 1 1.414 1.414 1 1 0 0 1-1.414-1.414Zm14.142 1.414a1 1 0 1 1-1.414-1.414 1 1 0 0 1 1.414 1.414ZM6.05 5.636A1 1 0 1 1 4.636 4.222 1 1 0 0 1 6.05 5.636Z"/>
        </svg>
        <!-- Moon (asleep) -->
        <svg id="asleep-icon" class="hidden" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M21 12.79A9 9 0 1 1 11.21 3c.2 0 .41.01.61.03a7 7 0 0 0 9.15 9.15c.02.2.03.41.03.61Z"/>
        </svg>
      </div>

      <!-- â€œBaby is awake!/asleep!â€ -->
      <p id="status-message" class="mt-4 text-xl font-bold text-yellow-800">
        Baby is awake!
      </p>

      <!-- â€œNext nap at / Next wake time isâ€ -->
      <p id="next-nap-container" class="mt-2">
        <span id="next-event-label" class="text-lg text-yellow-700">Next nap at</span>
      </p>

      <!-- Big time -->
      <div class="mt-1">
        <span id="next-event-time" class="text-4xl font-extrabold text-yellow-800">9:30 AM</span>
      </div>
    </div>

    <!-- Start/Stop Nap -->
    <button id="nap-control-btn"
      class="w-full bg-green-500 text-white font-bold py-4 px-6 rounded-2xl shadow-lg hover:bg-green-600 transition-colors">
      Start Nap
    </button>

    <!-- Big timer -->
    <div class="text-center">
      <div id="nap-timer-display" class="text-7xl font-extrabold tracking-tight">45:00</div>
      <p class="mt-2 text-sm text-gray-500">
        Reminder: Alarm sounds <span class="underline">1 minute</span> before nap ends.
      </p>
    </div>

    <!-- Schedule card -->
    <div class="rounded-3xl bg-white shadow-lg p-4">
      <div id="schedule-header" class="flex items-center justify-between cursor-pointer">
        <div class="flex items-center gap-2">
          <div class="w-5 h-5 rounded-md bg-blue-100 flex items-center justify-center">
            <span class="text-blue-600 text-sm">ğŸ—“ï¸</span>
          </div>
          <h2 class="text-lg font-semibold">Today's Schedule</h2>
        </div>
        <span id="schedule-toggle-icon" class="transition-transform">âŒ„</span>
      </div>

      <div id="schedule-summary" class="mt-1 text-sm text-gray-600">
        <!-- filled by JS: â€œ4 naps remaining â€¢ Next: 9:30 AMâ€ -->
      </div>

      <ul id="schedule-list" class="mt-4 space-y-3">
        <!-- JS renders items here; each li gets an Edit button with class 'edit-nap-btn' -->
      </ul>
    </div>
  </div>

  <!-- Edit Nap Modal -->
  <div id="edit-nap-modal" class="fixed inset-0 z-50 hidden" role="dialog" aria-modal="true" aria-labelledby="edit-modal-title">
    <div class="absolute inset-0 bg-black/50" data-edit-overlay></div>
    <div class="relative mx-auto mt-24 w-11/12 max-w-md rounded-2xl bg-white p-6 shadow-xl">
      <h3 id="edit-modal-title" class="text-lg font-semibold text-gray-800">Edit Nap Duration</h3>
      <label for="edit-nap-duration-input" class="mt-4 block text-sm text-gray-600">Duration (minutes)</label>
      <input id="edit-nap-duration-input" type="number" min="1" step="1"
             class="mt-1 w-full rounded-xl border border-gray-300 p-3 focus:outline-none focus:ring"
             placeholder="e.g. 45" />
      <div class="mt-6 flex justify-end gap-3">
        <button id="cancel-edit-btn" class="rounded-xl bg-gray-100 px-4 py-2 text-gray-700 hover:bg-gray-200">Cancel</button>
        <button id="save-edit-btn" class="rounded-xl bg-blue-600 px-4 py-2 font-semibold text-white hover:bg-blue-700">Save</button>
      </div>
    </div>
  </div>

  <!-- External JS (the single source of truth) -->
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
