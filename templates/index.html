<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Nap Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800">

  <div class="container mx-auto py-10">
    <h1 class="mb-6 text-2xl font-bold">Today's Schedule</h1>

    <!-- Example schedule items -->
    <div class="space-y-3">
      <div class="flex items-center justify-between rounded-xl bg-white p-4 shadow">
        <div>
          <p class="font-semibold">10:51 AM (45 min)</p>
          <p class="text-sm text-gray-500">upcoming</p>
        </div>
        <button onclick="openEditModal(this)" 
                data-duration="45"
                class="rounded-xl bg-blue-600 px-3 py-1 text-white hover:bg-blue-700">
          Edit
        </button>
      </div>
      <div class="flex items-center justify-between rounded-xl bg-white p-4 shadow">
        <div>
          <p class="font-semibold">2:06 PM (60 min)</p>
          <p class="text-sm text-gray-500">upcoming</p>
        </div>
        <button onclick="openEditModal(this)" 
                data-duration="60"
                class="rounded-xl bg-blue-600 px-3 py-1 text-white hover:bg-blue-700">
          Edit
        </button>
      </div>
      <div class="flex items-center justify-between rounded-xl bg-white p-4 shadow">
        <div>
          <p class="font-semibold">5:36 PM (30 min)</p>
          <p class="text-sm text-gray-500">upcoming</p>
        </div>
        <button onclick="openEditModal(this)" 
                data-duration="30"
                class="rounded-xl bg-blue-600 px-3 py-1 text-white hover:bg-blue-700">
          Edit
        </button>
      </div>
    </div>
  </div>

  <!-- Edit Nap Modal -->
  <div id="edit-nap-modal"
       class="fixed inset-0 z-50 hidden"
       role="dialog" aria-modal="true" aria-labelledby="edit-modal-title">
    <!-- overlay -->
    <div class="absolute inset-0 bg-black/50" onclick="closeEditModal()"></div>

    <!-- panel -->
    <div class="relative mx-auto mt-24 w-11/12 max-w-md rounded-2xl bg-white p-6 shadow-xl">
      <h3 id="edit-modal-title" class="text-lg font-semibold text-gray-800">
        Edit Nap Duration
      </h3>

      <label for="edit-nap-duration-input" class="mt-4 block text-sm text-gray-600">
        Duration (minutes)
      </label>
      <input
        id="edit-nap-duration-input"
        type="number" min="1" step="1"
        class="mt-1 w-full rounded-xl border border-gray-300 p-3 focus:outline-none focus:ring"
        placeholder="e.g. 45"
      />

      <div class="mt-6 flex justify-end gap-3">
        <button id="cancel-edit-btn"
                class="rounded-xl bg-gray-100 px-4 py-2 text-gray-700 hover:bg-gray-200">
          Cancel
        </button>
        <button id="save-edit-btn"
                class="rounded-xl bg-blue-600 px-4 py-2 font-semibold text-white hover:bg-blue-700">
          Save
        </button>
      </div>
    </div>
  </div>

  <!-- Script -->
  <script>
    function openEditModal(btn) {
      const modalEl   = document.getElementById('edit-nap-modal');
      const inputEl   = document.getElementById('edit-nap-duration-input');
      const cancelBtn = document.getElementById('cancel-edit-btn');
      const saveBtn   = document.getElementById('save-edit-btn');

      if (!modalEl || !inputEl) {
        console.error('Modal elements not found!');
        return;
      }

      // Show modal
      modalEl.classList.remove('hidden');

      // Prefill with existing duration
      if (btn && btn.dataset.duration) {
        inputEl.value = btn.dataset.duration;
      }

      // Cancel closes modal
      cancelBtn.onclick = () => modalEl.classList.add('hidden');

      // Save (for now just logs and closes)
      saveBtn.onclick = () => {
        console.log("New duration:", inputEl.value);
        modalEl.classList.add('hidden');
      };
    }

    function closeEditModal() {
      const modalEl = document.getElementById('edit-nap-modal');
      if (modalEl) modalEl.classList.add('hidden');
    }
  </script>
</body>
</html>
